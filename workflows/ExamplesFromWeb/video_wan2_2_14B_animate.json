{
  "1": {
    "inputs": {
      "text": "色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",
      "clip": [
        "2",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Negative Prompt)"
    }
  },
  "2": {
    "inputs": {
      "clip_name": "umt5_xxl_fp8_e4m3fn_scaled.safetensors",
      "type": "wan",
      "device": "default"
    },
    "class_type": "CLIPLoader",
    "_meta": {
      "title": "Load CLIP"
    }
  },
  "3": {
    "inputs": {
      "vae_name": "wan_2.1_vae.safetensors"
    },
    "class_type": "VAELoader",
    "_meta": {
      "title": "Load VAE"
    }
  },
  "4": {
    "inputs": {
      "clip_name": "clip_vision_h.safetensors"
    },
    "class_type": "CLIPVisionLoader",
    "_meta": {
      "title": "Load CLIP Vision"
    }
  },
  "9": {
    "inputs": {
      "crop": "none",
      "clip_vision": [
        "4",
        0
      ],
      "image": [
        "10",
        0
      ]
    },
    "class_type": "CLIPVisionEncode",
    "_meta": {
      "title": "CLIP Vision Encode"
    }
  },
  "10": {
    "inputs": {
      "image": "video_wan2_2_14B_animate_reference_image.png"
    },
    "class_type": "LoadImage",
    "_meta": {
      "title": "Load Image"
    }
  },
  "18": {
    "inputs": {
      "lora_name": "lightx2v_I2V_14B_480p_cfg_step_distill_rank64_bf16.safetensors",
      "strength_model": 1,
      "model": [
        "20",
        0
      ]
    },
    "class_type": "LoraLoaderModelOnly",
    "_meta": {
      "title": "LoraLoaderModelOnly"
    }
  },
  "19": {
    "inputs": {
      "filename_prefix": "video/ComfyUI",
      "format": "auto",
      "codec": "auto",
      "video": [
        "232:15",
        0
      ]
    },
    "class_type": "SaveVideo",
    "_meta": {
      "title": "Save Video"
    }
  },
  "20": {
    "inputs": {
      "unet_name": "Wan2_2-Animate-14B_fp8_e4m3fn_scaled_KJ.safetensors",
      "weight_dtype": "default"
    },
    "class_type": "UNETLoader",
    "_meta": {
      "title": "Load Diffusion Model"
    }
  },
  "21": {
    "inputs": {
      "text": "The character is dancing in the room",
      "clip": [
        "2",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Positive Prompt)"
    }
  },
  "23": {
    "inputs": {
      "video": [
        "145",
        0
      ]
    },
    "class_type": "GetVideoComponents",
    "_meta": {
      "title": "Get Video Components"
    }
  },
  "60": {
    "inputs": {
      "shift": 8,
      "model": [
        "99",
        0
      ]
    },
    "class_type": "ModelSamplingSD3",
    "_meta": {
      "title": "ModelSamplingSD3"
    }
  },
  "99": {
    "inputs": {
      "lora_name": "WanAnimate_relight_lora_fp16.safetensors",
      "strength_model": 1,
      "model": [
        "18",
        0
      ]
    },
    "class_type": "LoraLoaderModelOnly",
    "_meta": {
      "title": "LoraLoaderModelOnly"
    }
  },
  "100": {
    "inputs": {
      "detect_hand": "disable",
      "detect_body": "disable",
      "detect_face": "enable",
      "resolution": [
        "158",
        0
      ],
      "bbox_detector": "yolox_l.onnx",
      "pose_estimator": "dw-ll_ucoco_384_bs5.torchscript.pt",
      "scale_stick_for_xinsr_cn": "disable",
      "image": [
        "212",
        0
      ]
    },
    "class_type": "DWPreprocessor",
    "_meta": {
      "title": "DWPose Estimator"
    }
  },
  "101": {
    "inputs": {
      "detect_hand": "enable",
      "detect_body": "enable",
      "detect_face": "disable",
      "resolution": [
        "158",
        0
      ],
      "bbox_detector": "yolox_l.onnx",
      "pose_estimator": "dw-ll_ucoco_384_bs5.torchscript.pt",
      "scale_stick_for_xinsr_cn": "disable",
      "image": [
        "212",
        0
      ]
    },
    "class_type": "DWPreprocessor",
    "_meta": {
      "title": "DWPose Estimator"
    }
  },
  "107": {
    "inputs": {
      "keep_model_loaded": true,
      "individual_objects": false,
      "sam2_model": [
        "108",
        0
      ],
      "image": [
        "212",
        0
      ],
      "coordinates_positive": [
        "229",
        0
      ]
    },
    "class_type": "Sam2Segmentation",
    "_meta": {
      "title": "Sam2Segmentation"
    }
  },
  "108": {
    "inputs": {
      "model": "sam2_hiera_base_plus.safetensors",
      "segmentor": "video",
      "device": "cuda",
      "precision": "fp16"
    },
    "class_type": "DownloadAndLoadSAM2Model",
    "_meta": {
      "title": "(Down)Load SAM2Model"
    }
  },
  "145": {
    "inputs": {
      "file": "video_wan2_2_14B_animate_original_video.mp4"
    },
    "class_type": "LoadVideo",
    "_meta": {
      "title": "Load Video"
    }
  },
  "158": {
    "inputs": {
      "image_gen_width": [
        "159",
        0
      ],
      "image_gen_height": [
        "160",
        0
      ],
      "resize_mode": "Just Resize",
      "original_image": [
        "23",
        0
      ]
    },
    "class_type": "PixelPerfectResolution",
    "_meta": {
      "title": "Pixel Perfect Resolution"
    }
  },
  "159": {
    "inputs": {
      "value": 640
    },
    "class_type": "PrimitiveInt",
    "_meta": {
      "title": "Width"
    }
  },
  "160": {
    "inputs": {
      "value": 640
    },
    "class_type": "PrimitiveInt",
    "_meta": {
      "title": "Height"
    }
  },
  "212": {
    "inputs": {
      "upscale_method": "lanczos",
      "width": [
        "159",
        0
      ],
      "height": [
        "160",
        0
      ],
      "crop": "center",
      "image": [
        "23",
        0
      ]
    },
    "class_type": "ImageScale",
    "_meta": {
      "title": "Upscale Image"
    }
  },
  "229": {
    "inputs": {
      "points_store": "{\"positive\":[{\"x\":256,\"y\":256}],\"negative\":[{\"x\":0,\"y\":0}]}",
      "coordinates": "[{\"x\":256,\"y\":256}]",
      "neg_coordinates": "[{\"x\":0,\"y\":0}]",
      "bbox_store": "[{}]",
      "bboxes": "[{}]",
      "bbox_format": "xyxy",
      "width": 640,
      "height": 640,
      "normalize": false,
      "New canvas": null,
      "bg_image": [
        "212",
        0
      ]
    },
    "class_type": "PointsEditor",
    "_meta": {
      "title": "Points Editor"
    }
  },
  "243": {
    "inputs": {
      "filename_prefix": "video/ComfyUI",
      "format": "auto",
      "codec": "auto",
      "video": [
        "242:88",
        0
      ]
    },
    "class_type": "SaveVideo",
    "_meta": {
      "title": "Save Video"
    }
  },
  "274": {
    "inputs": {
      "expand": 10,
      "tapered_corners": true,
      "mask": [
        "107",
        0
      ]
    },
    "class_type": "GrowMask",
    "_meta": {
      "title": "GrowMask"
    }
  },
  "275": {
    "inputs": {
      "color": "0, 0, 0",
      "device": "cpu",
      "image": [
        "212",
        0
      ],
      "mask": [
        "276",
        0
      ]
    },
    "class_type": "DrawMaskOnImage",
    "_meta": {
      "title": "Draw Mask On Image"
    }
  },
  "276": {
    "inputs": {
      "block_size": 32,
      "device": "cpu",
      "masks": [
        "274",
        0
      ]
    },
    "class_type": "BlockifyMask",
    "_meta": {
      "title": "Blockify Mask"
    }
  },
  "279": {
    "inputs": {
      "value": 775979498547442
    },
    "class_type": "PrimitiveInt",
    "_meta": {
      "title": "Seed"
    }
  },
  "280": {
    "inputs": {
      "value": 561652658250311
    },
    "class_type": "PrimitiveInt",
    "_meta": {
      "title": "Seed"
    }
  },
  "232:57": {
    "inputs": {
      "trim_amount": [
        "232:62",
        3
      ],
      "samples": [
        "232:63",
        0
      ]
    },
    "class_type": "TrimVideoLatent",
    "_meta": {
      "title": "TrimVideoLatent"
    }
  },
  "232:58": {
    "inputs": {
      "samples": [
        "232:57",
        0
      ],
      "vae": [
        "3",
        0
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },
  "232:62": {
    "inputs": {
      "width": [
        "159",
        0
      ],
      "height": [
        "160",
        0
      ],
      "length": 77,
      "batch_size": 1,
      "continue_motion_max_frames": 5,
      "video_frame_offset": 0,
      "positive": [
        "21",
        0
      ],
      "negative": [
        "1",
        0
      ],
      "vae": [
        "3",
        0
      ],
      "clip_vision_output": [
        "9",
        0
      ],
      "reference_image": [
        "10",
        0
      ],
      "face_video": [
        "100",
        0
      ],
      "pose_video": [
        "101",
        0
      ],
      "background_video": [
        "275",
        0
      ],
      "character_mask": [
        "276",
        0
      ]
    },
    "class_type": "WanAnimateToVideo",
    "_meta": {
      "title": "WanAnimateToVideo"
    }
  },
  "232:230": {
    "inputs": {
      "batch_index": [
        "232:62",
        4
      ],
      "length": 4096,
      "image": [
        "232:58",
        0
      ]
    },
    "class_type": "ImageFromBatch",
    "_meta": {
      "title": "ImageFromBatch"
    }
  },
  "232:15": {
    "inputs": {
      "fps": 16,
      "images": [
        "232:230",
        0
      ],
      "audio": [
        "23",
        1
      ]
    },
    "class_type": "CreateVideo",
    "_meta": {
      "title": "Create Video"
    }
  },
  "232:63": {
    "inputs": {
      "seed": [
        "279",
        0
      ],
      "steps": 6,
      "cfg": 1,
      "sampler_name": "euler",
      "scheduler": "simple",
      "denoise": 1,
      "model": [
        "60",
        0
      ],
      "positive": [
        "232:62",
        0
      ],
      "negative": [
        "232:62",
        1
      ],
      "latent_image": [
        "232:62",
        2
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "KSampler"
    }
  },
  "242:87": {
    "inputs": {
      "samples": [
        "242:92",
        0
      ],
      "vae": [
        "3",
        0
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },
  "242:92": {
    "inputs": {
      "trim_amount": [
        "242:90",
        3
      ],
      "samples": [
        "242:91",
        0
      ]
    },
    "class_type": "TrimVideoLatent",
    "_meta": {
      "title": "TrimVideoLatent"
    }
  },
  "242:85": {
    "inputs": {
      "batch_index": [
        "242:90",
        4
      ],
      "length": 4096,
      "image": [
        "242:87",
        0
      ]
    },
    "class_type": "ImageFromBatch",
    "_meta": {
      "title": "ImageFromBatch"
    }
  },
  "242:90": {
    "inputs": {
      "width": [
        "159",
        0
      ],
      "height": [
        "159",
        0
      ],
      "length": 77,
      "batch_size": 1,
      "continue_motion_max_frames": 5,
      "video_frame_offset": [
        "232:62",
        5
      ],
      "positive": [
        "21",
        0
      ],
      "negative": [
        "1",
        0
      ],
      "vae": [
        "3",
        0
      ],
      "clip_vision_output": [
        "9",
        0
      ],
      "reference_image": [
        "10",
        0
      ],
      "face_video": [
        "100",
        0
      ],
      "pose_video": [
        "101",
        0
      ],
      "background_video": [
        "275",
        0
      ],
      "character_mask": [
        "276",
        0
      ],
      "continue_motion": [
        "232:58",
        0
      ]
    },
    "class_type": "WanAnimateToVideo",
    "_meta": {
      "title": "WanAnimateToVideo"
    }
  },
  "242:88": {
    "inputs": {
      "fps": 16,
      "images": [
        "242:86",
        0
      ],
      "audio": [
        "23",
        1
      ]
    },
    "class_type": "CreateVideo",
    "_meta": {
      "title": "Create Video"
    }
  },
  "242:91": {
    "inputs": {
      "seed": [
        "280",
        0
      ],
      "steps": 6,
      "cfg": 1,
      "sampler_name": "euler",
      "scheduler": "simple",
      "denoise": 1,
      "model": [
        "60",
        0
      ],
      "positive": [
        "242:90",
        0
      ],
      "negative": [
        "242:90",
        1
      ],
      "latent_image": [
        "242:90",
        2
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "KSampler"
    }
  },
  "242:86": {
    "inputs": {
      "image1": [
        "232:58",
        0
      ],
      "image2": [
        "242:85",
        0
      ]
    },
    "class_type": "ImageBatch",
    "_meta": {
      "title": "Batch Images"
    }
  }
}