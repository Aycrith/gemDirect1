
> cinematic-story-generator@0.0.0 test
> vitest --run --reporter=json

{"numTotalTestSuites":44,"numPassedTestSuites":44,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":107,"numPassedTests":107,"numFailedTests":0,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763085445205,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["buildShotPrompt"],"fullName":"buildShotPrompt returns the shot description when no enhancers or vision are provided","status":"passed","title":"returns the shot description when no enhancers or vision are provided","duration":0.13450000000011642,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildShotPrompt"],"fullName":"buildShotPrompt appends creative enhancers in a readable format","status":"passed","title":"appends creative enhancers in a readable format","duration":0.1602999999995518,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildShotPrompt"],"fullName":"buildShotPrompt appends the director's vision at the end","status":"passed","title":"appends the director's vision at the end","duration":0.08449999999993452,"failureMessages":[],"meta":{}},{"ancestorTitles":["buildShotPrompt"],"fullName":"buildShotPrompt orders description, enhancers, then director vision","status":"passed","title":"orders description, enhancers, then director vision","duration":0.16859999999996944,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot"],"fullName":"generateVideoFromShot queues a prompt and resolves with frame metadata","status":"passed","title":"queues a prompt and resolves with frame metadata","duration":2.2231999999994514,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot"],"fullName":"generateVideoFromShot allows overriding the negative prompt per shot","status":"passed","title":"allows overriding the negative prompt per shot","duration":1.1359000000002197,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot"],"fullName":"generateVideoFromShot propagates queueing errors and reports failure","status":"passed","title":"propagates queueing errors and reports failure","duration":0.8358999999991283,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateTimelineVideos"],"fullName":"generateTimelineVideos processes each shot sequentially and returns results","status":"passed","title":"processes each shot sequentially and returns results","duration":1.3554000000003725,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateTimelineVideos"],"fullName":"generateTimelineVideos continues after a shot fails and records an error placeholder","status":"passed","title":"continues after a shot fails and records an error placeholder","duration":1.0299999999997453,"failureMessages":[],"meta":{}}],"startTime":1763085450970,"endTime":1763085450977.03,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/comfyUIService.test.ts"},{"assertionResults":[{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should validate story idea can be expanded to a story bible","status":"passed","title":"should validate story idea can be expanded to a story bible","duration":0.5216000000000349,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should validate directors vision provides visual direction","status":"passed","title":"should validate directors vision provides visual direction","duration":0.17379999999957363,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should validate scene contains complete timeline data","status":"passed","title":"should validate scene contains complete timeline data","duration":0.24289999999928114,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should ensure all shots have required properties","status":"passed","title":"should ensure all shots have required properties","duration":0.3676999999997861,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should ensure all shots have enhancers defined","status":"passed","title":"should ensure all shots have enhancers defined","duration":0.22040000000015425,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should validate shot enhancers are properly structured","status":"passed","title":"should validate shot enhancers are properly structured","duration":0.26640000000043074,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should match enhancer values to known categories","status":"passed","title":"should match enhancer values to known categories","duration":0.40160000000014406,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should support batch generation with multiple shots","status":"passed","title":"should support batch generation with multiple shots","duration":0.5937000000003536,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should maintain shot order in batch generation results","status":"passed","title":"should maintain shot order in batch generation results","duration":0.27329999999983556,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should support transitions between shots","status":"passed","title":"should support transitions between shots","duration":0.3721000000005006,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should use negative prompt to exclude unwanted elements","status":"passed","title":"should use negative prompt to exclude unwanted elements","duration":0.18670000000020082,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should provide error recovery for failed shots","status":"passed","title":"should provide error recovery for failed shots","duration":0.18189999999958673,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should track generation progress for monitoring","status":"passed","title":"should track generation progress for monitoring","duration":0.21370000000024447,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Story to Video Generation Pipeline"],"fullName":"E2E: Story to Video Generation Pipeline should validate complete workflow data consistency","status":"passed","title":"should validate complete workflow data consistency","duration":0.33579999999983556,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Workflow Variations"],"fullName":"E2E: Workflow Variations should handle single-shot scenes","status":"passed","title":"should handle single-shot scenes","duration":0.18469999999979336,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Workflow Variations"],"fullName":"E2E: Workflow Variations should handle complex multi-shot scenes","status":"passed","title":"should handle complex multi-shot scenes","duration":0.39840000000003783,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Workflow Variations"],"fullName":"E2E: Workflow Variations should handle minimal enhancers","status":"passed","title":"should handle minimal enhancers","duration":0.12100000000009459,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Workflow Variations"],"fullName":"E2E: Workflow Variations should handle comprehensive enhancers","status":"passed","title":"should handle comprehensive enhancers","duration":0.10459999999966385,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Quality Assurance"],"fullName":"E2E: Quality Assurance should ensure story bible is coherent","status":"passed","title":"should ensure story bible is coherent","duration":0.09420000000045547,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Quality Assurance"],"fullName":"E2E: Quality Assurance should validate visual consistency across shots","status":"passed","title":"should validate visual consistency across shots","duration":0.16759999999976571,"failureMessages":[],"meta":{}},{"ancestorTitles":["E2E: Quality Assurance"],"fullName":"E2E: Quality Assurance should detect timing consistency","status":"passed","title":"should detect timing consistency","duration":0.13850000000002183,"failureMessages":[],"meta":{}}],"startTime":1763085451007,"endTime":1763085451012.3984,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/e2e.test.ts"},{"assertionResults":[{"ancestorTitles":["GenerationControls"],"fullName":"GenerationControls keeps the queued card until a queued event arrives even when execution_start fires first","status":"passed","title":"keeps the queued card until a queued event arrives even when execution_start fires first","duration":89.60639999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["GenerationControls"],"fullName":"GenerationControls surfaces final output after sequential lifecycle events","status":"passed","title":"surfaces final output after sequential lifecycle events","duration":62.72029999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["GenerationControls"],"fullName":"GenerationControls keeps low VRAM warnings in the queued card until an explicit queue event arrives","status":"passed","title":"keeps low VRAM warnings in the queued card until an explicit queue event arrives","duration":77.1294999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["GenerationControls"],"fullName":"GenerationControls shows an error card when queue status cannot be retrieved","status":"passed","title":"shows an error card when queue status cannot be retrieved","duration":31.169799999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["GenerationControls"],"fullName":"GenerationControls surfaces queue polling failures and keeps the queued card pinned","status":"passed","title":"surfaces queue polling failures and keeps the queued card pinned","duration":30.848500000000058,"failureMessages":[],"meta":{}}],"startTime":1763085450448,"endTime":1763085450739.8484,"status":"passed","message":"","name":"C:/Dev/gemDirect1/components/__tests__/GenerationControls.test.tsx"},{"assertionResults":[{"ancestorTitles":["generate-done-markers sentinel (integration)"],"fullName":"generate-done-markers sentinel (integration) creates a .done marker for a stable sequence (RunOnce)","status":"passed","title":"creates a .done marker for a stable sequence (RunOnce)","duration":798.3483999999994,"failureMessages":[],"meta":{}}],"startTime":1763085449256,"endTime":1763085450054.3484,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/done-marker.test.ts"},{"assertionResults":[{"ancestorTitles":[],"fullName":"queue-real-workflow.ps1 includes frame stability verification","status":"passed","title":"queue-real-workflow.ps1 includes frame stability verification","duration":0.2385999999996784,"failureMessages":[],"meta":{}}],"startTime":1763085451234,"endTime":1763085451234.2385,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/frameStability.test.ts"},{"assertionResults":[{"ancestorTitles":["queue-real-workflow frame selection"],"fullName":"queue-real-workflow frame selection prefers the most recently updated output directory and logs chosen outputDir","status":"passed","title":"prefers the most recently updated output directory and logs chosen outputDir","duration":0.47699999999986176,"failureMessages":[],"meta":{}}],"startTime":1763085451218,"endTime":1763085451218.477,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/queueFrameSelection.test.ts"},{"assertionResults":[{"ancestorTitles":["run-comfyui-e2e.ps1 safety guard"],"fullName":"run-comfyui-e2e.ps1 safety guard contains a process Path verification before Stop-Process","status":"passed","title":"contains a process Path verification before Stop-Process","duration":0.6102000000000771,"failureMessages":[],"meta":{}}],"startTime":1763085450854,"endTime":1763085450854.61,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/stopProcessGuard.test.ts"},{"assertionResults":[{"ancestorTitles":["story generator helpers"],"fullName":"story generator helpers selects fallback scenes when no LLM response is provided","status":"passed","title":"selects fallback scenes when no LLM response is provided","duration":0.25529999999980646,"failureMessages":[],"meta":{}},{"ancestorTitles":["story generator helpers"],"fullName":"story generator helpers builds story payload from LLM response when available","status":"passed","title":"builds story payload from LLM response when available","duration":0.44470000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["story generator helpers"],"fullName":"story generator helpers creates a fallback keyframe when preferred sample is missing","status":"passed","title":"creates a fallback keyframe when preferred sample is missing","duration":2.715700000000652,"failureMessages":[],"meta":{}},{"ancestorTitles":["story generator helpers"],"fullName":"story generator helpers writes scene/keyframe assets to the run directory","status":"passed","title":"writes scene/keyframe assets to the run directory","duration":12.862900000000081,"failureMessages":[],"meta":{}},{"ancestorTitles":["story generator helpers"],"fullName":"story generator helpers includes llm metadata even when falling back to deterministic story","status":"passed","title":"includes llm metadata even when falling back to deterministic story","duration":0.4981000000007043,"failureMessages":[],"meta":{}}],"startTime":1763085450923,"endTime":1763085450939.498,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/storyGenerator.test.ts"},{"assertionResults":[{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation uses nvidia-smi fallback note when /system_stats missing and gpu indicates fallback","status":"passed","title":"uses nvidia-smi fallback note when /system_stats missing and gpu indicates fallback","duration":0.386000000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation reports unavailable when no gpu fallback present","status":"passed","title":"reports unavailable when no gpu fallback present","duration":0.1723999999994703,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation reports missing VRAM with nvidia-smi when system present but VRAM missing","status":"passed","title":"reports missing VRAM with nvidia-smi when system present but VRAM missing","duration":0.14420000000063737,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation returns empty notes when no fallbacks are needed","status":"passed","title":"returns empty notes when no fallbacks are needed","duration":0.08579999999983556,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation includes frame stability warnings when provided","status":"passed","title":"includes frame stability warnings when provided","duration":0.10909999999967113,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation includes forced copy note when provided","status":"passed","title":"includes forced copy note when provided","duration":0.09969999999975698,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry fallback-note generation"],"fullName":"Telemetry fallback-note generation includes done marker warnings when provided","status":"passed","title":"includes done marker warnings when provided","duration":0.10469999999986612,"failureMessages":[],"meta":{}}],"startTime":1763085451083,"endTime":1763085451084.1091,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/telemetry-fallback.test.ts"},{"assertionResults":[{"ancestorTitles":["Telemetry negative-field validator (basic checks)"],"fullName":"Telemetry negative-field validator (basic checks) flags missing GPU object","status":"passed","title":"flags missing GPU object","duration":0.2371000000002823,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry negative-field validator (basic checks)"],"fullName":"Telemetry negative-field validator (basic checks) flags missing System object","status":"passed","title":"flags missing System object","duration":0.139299999999821,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry negative-field validator (basic checks)"],"fullName":"Telemetry negative-field validator (basic checks) flags non-array FallbackNotes","status":"passed","title":"flags non-array FallbackNotes","duration":0.15129999999953725,"failureMessages":[],"meta":{}}],"startTime":1763085451091,"endTime":1763085451091.237,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/telemetry-negative-fields.test.ts"},{"assertionResults":[{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) accepts a valid telemetry payload","status":"passed","title":"accepts a valid telemetry payload","duration":0.4318999999995867,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) rejects missing DurationSeconds","status":"passed","title":"rejects missing DurationSeconds","duration":0.1922999999997046,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) requires ExecutionSuccessAt when ExecutionSuccessDetected=true","status":"passed","title":"requires ExecutionSuccessAt when ExecutionSuccessDetected=true","duration":0.16340000000036525,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) validates HistoryExitReason enum","status":"passed","title":"validates HistoryExitReason enum","duration":0.1426000000001295,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) rejects non-numeric GPU VRAM fields","status":"passed","title":"rejects non-numeric GPU VRAM fields","duration":0.14400000000023283,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) detects inconsistent VramDeltaMB","status":"passed","title":"detects inconsistent VramDeltaMB","duration":0.13479999999981374,"failureMessages":[],"meta":{}},{"ancestorTitles":["Telemetry shape validation (exhaustive)"],"fullName":"Telemetry shape validation (exhaustive) requires System.FallbackNotes to be an array of strings","status":"passed","title":"requires System.FallbackNotes to be an array of strings","duration":0.13070000000061555,"failureMessages":[],"meta":{}}],"startTime":1763085451068,"endTime":1763085451070.1306,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/telemetry-shape.test.ts"},{"assertionResults":[{"ancestorTitles":[],"fullName":"queue-real-workflow.ps1 contains required telemetry field names","status":"passed","title":"queue-real-workflow.ps1 contains required telemetry field names","duration":0.31010000000060245,"failureMessages":[],"meta":{}}],"startTime":1763085451227,"endTime":1763085451227.31,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/telemetryContractFields.test.ts"},{"assertionResults":[{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 passes when telemetry exists for each scene","status":"passed","title":"passes when telemetry exists for each scene","duration":378.5309,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when telemetry is missing from artifact metadata","status":"passed","title":"fails when telemetry is missing from artifact metadata","duration":358.3844999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when pollLimit text does not match metadata","status":"passed","title":"fails when pollLimit text does not match metadata","duration":372.39570000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when fallback notes lack matching warnings in run-summary","status":"passed","title":"fails when fallback notes lack matching warnings in run-summary","duration":368.078,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 passes when fallback warnings are logged alongside metadata notes","status":"passed","title":"passes when fallback warnings are logged alongside metadata notes","duration":369.97389999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when SceneRetryBudget text does not match metadata","status":"passed","title":"fails when SceneRetryBudget text does not match metadata","duration":369.0808000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when VRAMBeforeMB entry is missing from telemetry summary","status":"passed","title":"fails when VRAMBeforeMB entry is missing from telemetry summary","duration":369.32299999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when reported VRAM delta differs from MB before/after difference","status":"passed","title":"fails when reported VRAM delta differs from MB before/after difference","duration":367.2113999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["validate-run-summary.ps1"],"fullName":"validate-run-summary.ps1 fails when queue policy values do not match metadata","status":"passed","title":"fails when queue policy values do not match metadata","duration":368.4728,"failureMessages":[],"meta":{}}],"startTime":1763085445912,"endTime":1763085449235.473,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/validateRunSummary.test.ts"},{"assertionResults":[{"ancestorTitles":["workflow patcher"],"fullName":"workflow patcher replaces keyframe and scene metadata placeholders","status":"passed","title":"replaces keyframe and scene metadata placeholders","duration":0.31260000000020227,"failureMessages":[],"meta":{}},{"ancestorTitles":["workflow patcher"],"fullName":"workflow patcher does not mutate the original workflow template","status":"passed","title":"does not mutate the original workflow template","duration":0.12210000000050059,"failureMessages":[],"meta":{}},{"ancestorTitles":["workflow patcher"],"fullName":"workflow patcher handles templates missing optional nodes without throwing","status":"passed","title":"handles templates missing optional nodes without throwing","duration":0.18000000000029104,"failureMessages":[],"meta":{}}],"startTime":1763085451210,"endTime":1763085451210.3125,"status":"passed","message":"","name":"C:/Dev/gemDirect1/scripts/__tests__/workflowPatcher.test.ts"},{"assertionResults":[{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration runs the full upload/prompt/ws harness and returns frames","status":"passed","title":"runs the full upload/prompt/ws harness and returns frames","duration":10.834200000000237,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration throws when the /prompt endpoint returns an error","status":"passed","title":"throws when the /prompt endpoint returns an error","duration":7.481300000000374,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration supports video outputs with MP4 final data","status":"passed","title":"supports video outputs with MP4 final data","duration":1.8468999999995503,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration handles queue polling failures gracefully","status":"passed","title":"handles queue polling failures gracefully","duration":1.7103000000006432,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration waits for queue info to report empty before resolving","status":"passed","title":"waits for queue info to report empty before resolving","duration":1.9175999999997657,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration does not resolve until the queue drains even if WebSocket emits executed early","status":"passed","title":"does not resolve until the queue drains even if WebSocket emits executed early","duration":1.6842999999998938,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration waits for a queued update when execution_start precedes the queued status event","status":"passed","title":"waits for a queued update when execution_start precedes the queued status event","duration":1.8859000000002197,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration fails when the queue polling helper rejects before the queue drains","status":"passed","title":"fails when the queue polling helper rejects before the queue drains","duration":1.6135999999996784,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration surfaces queue endpoint failures before completion","status":"passed","title":"surfaces queue endpoint failures before completion","duration":1.720499999999447,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateVideoFromShot integration"],"fullName":"generateVideoFromShot integration surfaces low VRAM warnings from the pre-flight checks","status":"passed","title":"surfaces low VRAM warnings from the pre-flight checks","duration":1.5259000000005472,"failureMessages":[],"meta":{}},{"ancestorTitles":["generateTimelineVideos integration"],"fullName":"generateTimelineVideos integration processes every shot via the shared harness and reports progress","status":"passed","title":"processes every shot via the shared harness and reports progress","duration":2.5042999999996027,"failureMessages":[],"meta":{}}],"startTime":1763085450796,"endTime":1763085450830.5044,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/__tests__/generateVideoFlow.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["checkServerConnection"],"fullName":"checkServerConnection resolves when server returns valid stats","status":"passed","title":"resolves when server returns valid stats","duration":0.5893999999998414,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkServerConnection"],"fullName":"checkServerConnection throws when server responds with non-ok status","status":"passed","title":"throws when server responds with non-ok status","duration":0.30310000000008586,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkServerConnection"],"fullName":"checkServerConnection throws timeout errors specially","status":"passed","title":"throws timeout errors specially","duration":0.3199000000004162,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkSystemResources"],"fullName":"checkSystemResources returns GPU stats when device exists","status":"passed","title":"returns GPU stats when device exists","duration":0.2591000000002168,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkSystemResources"],"fullName":"checkSystemResources warns when VRAM is low","status":"passed","title":"warns when VRAM is low","duration":0.22260000000005675,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkSystemResources"],"fullName":"checkSystemResources warns when no GPU is listed","status":"passed","title":"warns when no GPU is listed","duration":0.17250000000058208,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkSystemResources"],"fullName":"checkSystemResources reports timeout as a failure message","status":"passed","title":"reports timeout as a failure message","duration":0.18470000000070286,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkSystemResources"],"fullName":"checkSystemResources handles HTTP errors gracefully","status":"passed","title":"handles HTTP errors gracefully","duration":0.17039999999997235,"failureMessages":[],"meta":{}}],"startTime":1763085451114,"endTime":1763085451116.2227,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/__tests__/preflight.test.ts"},{"assertionResults":[{"ancestorTitles":["queueComfyUIPrompt integration"],"fullName":"queueComfyUIPrompt integration uploads the keyframe and injects prompts into the workflow payload","status":"passed","title":"uploads the keyframe and injects prompts into the workflow payload","duration":1.0951999999997497,"failureMessages":[],"meta":{}}],"startTime":1763085451197,"endTime":1763085451198.0952,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/__tests__/queueComfyUIPrompt.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["sceneGenerationPipeline"],"fullName":"sceneGenerationPipeline creates shot plans with prompts and context metadata","status":"passed","title":"creates shot plans with prompts and context metadata","duration":0.4837999999999738,"failureMessages":[],"meta":{}},{"ancestorTitles":["sceneGenerationPipeline"],"fullName":"sceneGenerationPipeline requests keyframes for every plan and strips data URL prefixes","status":"passed","title":"requests keyframes for every plan and strips data URL prefixes","duration":0.43879999999990105,"failureMessages":[],"meta":{}},{"ancestorTitles":["sceneGenerationPipeline"],"fullName":"sceneGenerationPipeline runs the full pipeline, merges keyframes, and calls timeline generation","status":"passed","title":"runs the full pipeline, merges keyframes, and calls timeline generation","duration":0.6849000000001979,"failureMessages":[],"meta":{}}],"startTime":1763085451162,"endTime":1763085451163.6848,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/__tests__/sceneGenerationPipeline.test.ts"},{"assertionResults":[{"ancestorTitles":["trackPromptExecution"],"fullName":"trackPromptExecution reports queue status updates","status":"passed","title":"reports queue status updates","duration":1.2011999999995169,"failureMessages":[],"meta":{}},{"ancestorTitles":["trackPromptExecution"],"fullName":"trackPromptExecution reports execution progress and node titles","status":"passed","title":"reports execution progress and node titles","duration":0.7590000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["trackPromptExecution"],"fullName":"trackPromptExecution handles execution errors","status":"passed","title":"handles execution errors","duration":0.3672999999998865,"failureMessages":[],"meta":{}},{"ancestorTitles":["trackPromptExecution"],"fullName":"trackPromptExecution reports completion without outputs","status":"passed","title":"reports completion without outputs","duration":0.3338999999996304,"failureMessages":[],"meta":{}},{"ancestorTitles":["trackPromptExecution"],"fullName":"trackPromptExecution reports websocket connection errors","status":"passed","title":"reports websocket connection errors","duration":1.0956000000005588,"failureMessages":[],"meta":{}}],"startTime":1763085451038,"endTime":1763085451042.0957,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/__tests__/trackPromptExecution.test.ts"},{"assertionResults":[{"ancestorTitles":["validateWorkflowAndMappings"],"fullName":"validateWorkflowAndMappings passes when required mappings exist","status":"passed","title":"passes when required mappings exist","duration":0.27259999999932916,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateWorkflowAndMappings"],"fullName":"validateWorkflowAndMappings throws when the main text prompt mapping is missing","status":"passed","title":"throws when the main text prompt mapping is missing","duration":0.5445999999992637,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateWorkflowAndMappings"],"fullName":"validateWorkflowAndMappings throws when the keyframe image mapping is missing","status":"passed","title":"throws when the keyframe image mapping is missing","duration":0.28039999999964493,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateWorkflowAndMappings"],"fullName":"validateWorkflowAndMappings throws when a mapped node no longer exists","status":"passed","title":"throws when a mapped node no longer exists","duration":0.26270000000022264,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateWorkflowAndMappings"],"fullName":"validateWorkflowAndMappings throws when a mapped input is not available on the node","status":"passed","title":"throws when a mapped input is not available on the node","duration":0.27229999999963184,"failureMessages":[],"meta":{}}],"startTime":1763085451172,"endTime":1763085451174.2722,"status":"passed","message":"","name":"C:/Dev/gemDirect1/services/__tests__/validateWorkflowAndMappings.test.ts"}]}
